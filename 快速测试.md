# 快速测试指南

## 测试中文字体

运行以下命令测试中文字体是否正常：

```bash
python test_chinese_font.py
```

这将生成一个测试图片 `chinese_font_test.png`，检查图片中的中文是否正常显示。

## 测试应用

### 1. 不配置 API Key 测试（基础功能）

直接运行应用：
```bash
streamlit run app.py
```

**预期行为：**
- ✅ 界面显示为中文
- ✅ 可以输入关键词和选择日期
- ✅ 点击"开始分析"后能从 OpenAlex 获取论文
- ⚠️ 会提示"未配置 LLM API 密钥"
- ❌ 无法提取关键词和生成热力图

### 2. 配置 API Key 测试（完整功能）

**步骤：**

1. 创建 `.env` 文件：
```bash
copy .env.example .env
```

2. 编辑 `.env` 文件，填入你的 API Key：
```
LLM_API_KEY=你的密钥
LLM_ENDPOINT=https://dashscope.aliyuncs.com/compatible-mode/v1
```

3. 运行应用：
```bash
streamlit run app.py
```

**预期行为：**
- ✅ 所有功能正常
- ✅ 能识别一区期刊
- ✅ 能提取关键词
- ✅ 能生成中文热力图（无乱码）

### 3. 测试用例

**测试用例 1：量子计算**
- 关键词：`量子计算`
- 时间范围：2020-01-01 到 2024-12-31
- 预期：获取相关论文并生成热力图

**测试用例 2：机器学习**
- 关键词：`machine learning`
- 时间范围：2023-01-01 到 2024-12-31
- 预期：获取相关论文并生成热力图

**测试用例 3：深度学习**
- 关键词：`深度学习`
- 时间范围：2022-01-01 到 2023-12-31
- 预期：获取相关论文并生成热力图

## 检查清单

### 界面检查
- [ ] 标题显示为"🔬 研究热点分析工具"
- [ ] 输入框标签为"🔍 研究领域关键词"
- [ ] 日期选择器标签为"📅 起始日期"和"📅 结束日期"
- [ ] 按钮文字为"🚀 开始分析"
- [ ] 侧边栏显示"⚙️ 设置"和使用说明

### 功能检查
- [ ] 输入空关键词会显示错误提示
- [ ] 起始日期晚于结束日期会显示错误提示
- [ ] 能成功从 OpenAlex 获取论文
- [ ] 能提取关键词（需配置 API Key）
- [ ] 热力图中文显示正常（无方框或乱码）
- [ ] 统计面板显示正确的数字

### 缓存检查
- [ ] 相同查询第二次执行更快
- [ ] 点击"清除缓存"后缓存被清空
- [ ] 清除缓存后重新查询会重新调用 API

## 常见问题排查

### 问题 1：中文显示为方框
**解决方案：**
1. 检查系统是否安装了中文字体
2. Windows 用户通常不需要额外操作
3. Linux 用户需要安装中文字体包

### 问题 2：无法连接 OpenAlex
**解决方案：**
1. 检查网络连接
2. 确认防火墙没有阻止连接
3. 尝试使用 VPN

### 问题 3：LLM 调用失败
**解决方案：**
1. 检查 API Key 是否正确
2. 检查 API 额度是否充足
3. 检查网络连接

### 问题 4：没有生成热力图
**解决方案：**
1. 确认已配置 LLM API Key
2. 检查是否成功提取了关键词
3. 查看错误提示信息

## 性能测试

### 预期性能指标
- OpenAlex 查询：5-10 秒
- 关键词提取（100篇论文）：30-60 秒
- 矩阵构建：< 1 秒
- 热力图生成：1-2 秒

### 缓存效果
- 首次查询：完整时间
- 缓存命中：< 1 秒

## 报告问题

如果遇到问题，请提供以下信息：
1. 操作系统和版本
2. Python 版本
3. 错误消息截图
4. 使用的关键词和时间范围
5. 是否配置了 API Key
